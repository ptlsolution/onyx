(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{81561:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home-auth",function(){return n(9606)}])},22237:function(e,t,n){"use strict";n.d(t,{I:function(){return l},N:function(){return i.N}});var r=n(52322),o=n(25237),a=n.n(o),i=n(44819);let s=a()(()=>n.e(2779).then(n.bind(n,42779)).then(e=>e.ConfirmSafariClipboardComponent),{loadableGenerated:{webpack:()=>[42779]},ssr:!1}),l=()=>{let{onSucess:e}=(0,i.N)();return e&&(0,r.jsx)(s,{})}},44819:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(53476);let o=(0,r.cn)({key:"confirmSafariClipboardState",default:null}),a=()=>{let[e,t]=(0,r.FV)(o);return{onClose:()=>t(null),setConfirm:e=>t({onSuccess:e}),onSucess:null==e?void 0:e.onSuccess}}},35605:function(e,t,n){"use strict";n.d(t,{f:function(){return i},r:function(){return s}});var r=n(52322),o=n(2784);let a=(0,o.createContext)(null),i=e=>{let{children:t,shouldTrackingLog:n}=e,i=(0,o.useMemo)(()=>({shouldTrackingLog:n}),[n]);return(0,r.jsx)(a.Provider,{value:i,children:t})},s=()=>(0,o.useContext)(a)||{shouldTrackingLog:!0}},9268:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});let r=e=>{let{resource:t,file:n,option:r,size:o,action:a}=e,i=new URLSearchParams;return i.set("resource","".concat(t)),n&&r?(i.set("file",n),i.set("option","".concat(r))):o&&i.set("size","".concat(o)),a&&i.set("action",a),i.toString()},o=async e=>{let t=r(e),n=await fetch("/api/regular/download?".concat(t));return n.ok?{success:!0,data:await n.json()}:429===n.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===n.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},38613:function(e,t,n){"use strict";n.d(t,{iJ:function(){return N},Zd:function(){return O},tS:function(){return U}});var r=n(80050),o=n(2784),a=n(76828),i=n(85617),s=n(42155),l=n(71784);let c=(e,t)=>t||("photo"===e?"jpg":"zip");var u=n(6594),d=n(35605),m=n(9268),b=n(33554),f=n(48532),p=n(72302),_=n(21805),h=n(30195),x=n(43900);let g=h.z.enum(["download","copy","edit","prompt"]);h.z.object({resource:h.z.coerce.number(),file:x.ru.optional(),option:h.z.coerce.number().optional(),size:h.z.coerce.number().optional(),action:g.optional()}),h.z.object({data:h.z.object({filename:h.z.string(),url:h.z.string(),prompt:h.z.string().optional()})}).transform(e=>{let{data:t}=e;return t});let w=h.z.array(h.z.string()),j=new Date(new Date().getTime()+48e4),y=_.Z.withConverter({write:e=>e}),v=e=>{try{let t=y.get(e);if(!t)return[];return w.parse(JSON.parse(t))}catch(e){return[]}},C=()=>{let e=(0,p.I)(),t=(0,f.b)();return(0,o.useCallback)(n=>{if(!e)return;let r="".concat("ck_items_").concat(e),o=v(r),a="".concat(n);if(!o.includes(a)){let e=JSON.stringify([...o,a]);y.set(r,e,{path:"/",domain:t,expires:j})}},[e,t])},N=e=>{let{resource:t,file:n,action:f="download",location:p="resource_detail",option:_,size:h,isRemoveBackgroundActive:x=!1}=e,{id:g,name:w,author:j,premium:y,regularType:v,isAIGenerated:N}=t,[S,O]=(0,o.useState)(!1),{isUserWinback:R,showWinbackModal:k}=(0,i.lK)(),{showAttribution:E}=(0,u.tc)(),I=C(),T=(0,b.b)(),A=(0,s.mS)(),{shouldTrackingLog:L}=(0,d.r)(),{showDeviceBlockedModal:U,isDeviceBlocked:z}=(0,r.qx)(),M=(0,a.TH)({file_extension:c(v,n),file_name:w,file_id:g,license:y?"premium":"free",resolution:h?l.w8[h]:"original",style:"na",author_name:j.name,category:N?"ai_image":v,action:"prompt"===f?"view_prompt":f,location:p});return{handleDownload:(0,o.useCallback)(async()=>{if(z){U();return}if(R){k();return}O(!0);let e=await (0,m.H)({resource:g,size:h?2e3:void 0,action:f,file:n,option:_});if(e.success)return"prompt"!==f&&E&&E(),O(!1),I(g),L&&A({resourceId:g,isResourcePremium:y,resourceType:v,downloadType:x&&"edit"===f?l.QN:f}),M(),e.data;"prompt"!==f&&T(e),O(!1)},[z,R,g,h,f,n,_,U,k,E,I,L,M,x,A,y,v,T]),isDownloading:S}};var S=n(25720);let O=e=>{let{isDownloading:t,handleDownload:n}=N(e),r=(0,S.J)();return{isDownloading:t,onClick:(0,o.useCallback)(async e=>{e.preventDefault();let t=e.currentTarget;if(!t)return;let o=await n();o&&(o.filename&&(t.download=o.filename),t.href=o.url,t.click(),r())},[n,r])}};var R=n(18460),k=n(20037),E=n(15721),I=n(7415),T=n(22237),A=n(85074);let L=(e,t)=>{let n=document.createElement("a");t&&(n.download=t),n.href=e,n.click(),setTimeout(function(){n.remove()},200)},U=()=>{let{t:e}=(0,I.$G)(["detail","common"]),[t,n]=(0,o.useState)(!1),{setToast:r}=(0,A.p)(),{setConfirm:a}=(0,T.N)(),i=(0,o.useCallback)(async t=>{try{(0,E.C)()||r({type:"danger",message:e("clipboardNotSupported")}),n(!0),await navigator.clipboard.write([t]),r({type:"success",title:e("detail:copyImageClipboard"),message:e("common:copiedsuccessfully"),testId:"notification-copied-successfully"})}catch(e){r()}finally{n(!1)}},[r,e]),s=(0,o.useCallback)(async(e,t,n,r,o,s)=>{let l="clipboard"===r,c=l?e.naturalWidth:t,u=l?e.naturalHeight:n,d=document.createElement("canvas");d.width=c,d.height=u;let m=d.getContext("2d");m&&(m.drawImage(e,0,0,c,u),d.toBlob(async e=>{let t;if(e){if(l){if((0,k.gn)()||R.G){t=new ClipboardItem({[e.type]:Promise.resolve(e)}),a(()=>{i(t)});return}i(t=new ClipboardItem({[e.type]:e}))}else{let t=window.URL.createObjectURL(e);L(t,s),window.URL.revokeObjectURL(t)}}},"image/".concat(o),1))},[i,a]);return{downloadImageSize:(0,o.useCallback)(async e=>{let{url:t,filename:n,width:o,height:a}=e;try{let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{s(e,o,a,"download","jpeg",n)},e.onerror=()=>r()}catch(e){r()}},[s,r]),downloadCopyImageToClipboard:(0,o.useCallback)(async e=>{let{url:t,width:o,height:a}=e;try{n(!0);let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{s(e,o,a,"clipboard","png")},e.onerror=()=>{n(!1),r()}}catch(e){n(!1),r()}},[r,s]),isCopying:t}}},33554:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(7415),o=n(2784),a=n(85074);let i=()=>{let{t:e}=(0,r.$G)("error"),{setToast:t}=(0,a.p)();return(0,o.useCallback)(n=>{if("DOWNLOAD_LIMIT_REACHED"===n.data&&"metadata"in n){window.location.href=n.metadata;return}if("AUTHENTICATION_ERROR"===n.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===n.data&&t({type:"danger",message:e("notFound")}),"UNKNOWN_ERROR"===n.data&&t({type:"danger",message:e("unknown")})},[t,e])}},9606:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return ea},default:function(){return eo}});var r=n(52322),o=n(15605),a=n(25237),i=n.n(a),s=n(7415),l=n(99578),c=n(17927),u=n(436),d=n(47177),m=n(41569),b=n(78159),f=n(2784),p=n(28144),_=n(46138),h=n(63323),x=n(27427),g=n(74133),w=n(94951),j=n(6323),y=n(39097),v=n.n(y);n(39515),n(62159),n(17360);let C=e=>{let{isMaxFiles:t}=e,{t:n}=(0,s.$G)(["home","common"]);return(0,r.jsxs)(g.x,{display:"flex",width:"full",justifyContent:"space-between",children:[(0,r.jsx)("h2",{className:"_1286nb12mx _1286nb162s",children:n("common:recent")}),t&&(0,r.jsxs)(v(),{href:"/user/projects",className:"_1286nb12xf _1286nb132f _1286nb12nl _1286nb15nj _1286nb15op _1286nb18l _1286nb12tx _1286nb12t9",children:[n("home:seeAll"),(0,r.jsx)(w.J,{as:j.Z,className:"_16baiql4"})]})]})};var N=n(55307),S=n(50738),O=n(28180),R=n(40291),k=n(96577),E=n.n(k),I=n(25694),T=n(8173),A=n(283);n(9732);let L=e=>{let{location:t}=e,{t:n}=(0,s.$G)("home"),a=(0,T.M)(),i=n("bannerProjects.button"),l=(0,o.L3)();return(0,r.jsxs)("div",{className:"_z36yo11 _1286nb12j9 _1286nb1299 _1286nb123x _1286nb122c _1286nb12dx _1286nb12cc _1286nb12yl _1286nb12wo _1286nb133l _1286nb131o _1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb18l _1286nb12v3 _1286nb12ut _1286nb12tx _1286nb12uh _1286nb12t9 _1286nb13df",children:[(0,r.jsxs)("div",{className:"_1286nb18l _1286nb18c _1286nb12v3 _1286nb12tx _1286nb12t3",children:[(0,r.jsx)("h3",{className:"_1286nb12n9 _1286nb11of _1286nb12r3 _1286nb162s",children:n("bannerProjects.title")}),(0,r.jsx)("p",{className:"_1286nb12rx _1286nb11p9 _1286nb16ea",children:n("bannerProjects.description")}),(0,r.jsx)(R.gg,{onClick:()=>{a({linkText:i,location:t}),window.location.href="".concat(l(A.M),"?template=new-artboard&action=resize")},color:"black",children:i})]}),(0,r.jsx)(E(),{src:"".concat(I.p,"/home/banner-files/files-empty-v2.webp"),height:175,width:150,alt:"Empty banner image",className:"_1286nb11w9 _1286nb11xv _1286nb11hl _1286nb11j7 _1286nb183 _1286nb18b"})]})};n(140);let U=()=>{let{files:e}=(0,h.Y)(),t=(0,N.a)("xlMax"),n=e.slice(0,5);if(0===e.length)return(0,r.jsx)(L,{location:"home_menu"});let o=(0,r.jsx)("div",{className:"_1vxrick1 _1286nb18l _1286nb12ur",children:n.map((e,n)=>(0,r.jsx)(O.m,{fileUnity:e,popoverOrientation:(n+1)%5==0||t?"left":void 0,type:"all",isHome:!0},e.id))});return t?(0,r.jsx)(S.S,{style:"resources",overflowScrolling:!1,children:o}):o},z=()=>(0,r.jsx)(x.i,{title:(0,r.jsx)(p.ZI,{}),children:(0,r.jsx)(p.t4,{fromElement:"home_tools",type:"carousel"})}),M=e=>{let{isMaxFiles:t}=e;return(0,r.jsx)(x.i,{title:(0,r.jsx)(C,{isMaxFiles:t}),children:(0,r.jsx)(U,{})})},P=()=>{let{getNewFiles:e,files:t,loading:n,page:o,isFirstLoading:a}=(0,h.Y)(),[i,s]=(0,f.useState)(!1),[l,c]=(0,f.useState)(!0),[u,d]=(0,f.useState)(!0),[m,b]=(0,f.useState)(!0),p=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{!(n||a)&&m&&(b(!1),c(!1),d(t.length>0)),t.length>=5&&(null==s||s(!0))},[t,s,n,a,m]),(0,f.useEffect)(()=>{p.current||(p.current=!0,e())},[e,o]),(0,_.w)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.f,{isLoading:l,children:u?(0,r.jsx)(M,{isMaxFiles:i}):(0,r.jsx)(z,{})}),(0,r.jsx)(x.f,{isLoading:l,children:u?(0,r.jsx)(z,{}):(0,r.jsx)(M,{isMaxFiles:i})})]})};var D=n(5632),G=n(79081);let F=async e=>{let{locale:t,user:n}=e,r=new URLSearchParams({locale:t});n&&r.set("user",n);let o=await fetch("/api/collections/trends?".concat(r.toString()));if(!o.ok)throw Error(o.statusText);return o.json()},W={LOADING:"LOADING",SUCCESS:"SUCCESS",ERROR:"ERROR"},H={loading:!0,data:void 0,error:void 0},$=(e,t)=>{switch(t.type){case W.LOADING:return H;case W.SUCCESS:return{loading:!1,data:t.payload,error:void 0};case W.ERROR:return{loading:!1,data:void 0,error:t.payload};default:return e}},Z=()=>(0,f.useReducer)($,H),J=e=>{let{locale:t,user:n}=e,[r,o]=Z();return(0,f.useEffect)(()=>{(async()=>{o({type:W.LOADING});try{let e=await F({locale:t,user:n});o({type:W.SUCCESS,payload:e})}catch(e){o({type:W.ERROR,payload:e instanceof Error?e.message:"Unknown error feching trendy collections"})}})()},[o,t,n]),r},K=e=>{let t=(0,o.ZK)(),{query:n}=(0,D.useRouter)(),{loading:a,data:i,error:s}=J({locale:t,user:"premium"===n.userType?"premium":"free"});return s?null:a||!i?(0,r.jsx)(G.x,{...e}):(0,r.jsx)(G.F,{collections:i,fromElement:"home_collections",...e})};var B=n(28638),Y=n(57967),q=n(20093),V=n(92087),X=n(42155);n(7188);let Q=e=>{let{items:t}=e,{t:n}=(0,s.$G)("home"),{uuidSearchTracker:o}=(0,X.aZ)({page:1,total:t.length,items:t,track:"rcm"});return(0,r.jsxs)("div",{className:"_1wc8gem5 _1286nb11zr _1286nb11l3 _1286nb12il _1286nb128l _1286nb13df _1286nb147x _1286nb11ax",children:[(0,r.jsx)("h2",{className:"_1286nb12sf _1286nb12pr _1286nb12pj _1286nb12ol _1286nb12r3 _1286nb12rr _1286nb162s _1286nb11p9",children:n("selectedContentForYou")}),(0,r.jsx)(V.n,{children:(0,r.jsx)(X.bu,{fromView:"user_recommendations_home",items:t,uuid:o,children:(0,r.jsx)(B.e,{children:t.map(e=>(0,r.jsx)(q.R,{item:e,isModal:!1,uuid:o,children:(0,r.jsx)(Y.AddToCollection,{type:e.type,id:e.id,preview:e.preview.url,location:"thumbnail"})},"thumbnail-".concat(e.id)))})})})]})},ee=e=>{let{items:t}=e;return t.length?(0,r.jsx)(Q,{items:t}):null},et=i()(()=>Promise.all([n.e(2854),n.e(8725)]).then(n.bind(n,72854)).then(e=>e.CampaignBanner),{loadableGenerated:{webpack:()=>[72854]}}),en=i()(()=>Promise.all([n.e(2854),n.e(4108),n.e(6453)]).then(n.bind(n,20716)).then(e=>e.HomeMiddleBanner),{loadableGenerated:{webpack:()=>[20716]}}),er=e=>{let{alternates:t,categories:n,coverImage:a,currentUrl:i,highlights:c,popularSearches:f,recommendedContent:p,topBarMode:_,isPremiumUser:h}=e,{t:x}=(0,s.$G)(["common","home"]),g=(0,o.$T)("/popular-collections"),w=(0,r.jsx)(b.v,{title:x("home:trending.title"),subtitle:x("home:trending.subtitle"),children:(0,r.jsx)(l.I,{categories:n})}),j=(0,r.jsx)(K,{button:{title:x("common:exploreCollections"),link:g,type:"solid",position:"right"},sectionName:x("home:collections.section"),title:x("home:collections.title"),subtitle:x("home:collections.subtitle")});return(0,r.jsxs)(m.O,{alternates:t,bannerContent:h?(0,r.jsx)(et,{location:"upgrade"}):(0,r.jsx)(en,{}),coverImage:a,currentUrl:i,dynamicSectionContent:(0,r.jsx)(P,{}),highlights:c,popularSearches:f,topBarMode:_,userType:h?d.W.premium:d.W.free,children:[(0,r.jsx)(ee,{items:p}),h?(0,r.jsxs)(r.Fragment,{children:[j,w]}):(0,r.jsxs)(r.Fragment,{children:[w,j,(0,r.jsx)(u.f,{isAuth:!0})]})]})};er.layout=c.L;var eo=er,ea=!0},18460:function(e,t,n){"use strict";n.d(t,{G:function(){return o},v:function(){return r}});let r=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,o=!!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},20037:function(e,t,n){"use strict";n.d(t,{gn:function(){return a},eE:function(){return o}});let r=(()=>{if("undefined"==typeof navigator)return"Unknown";let e=navigator.userAgent,t=navigator.platform,n={MacOS:["Macintosh","MacIntel","MacPPC","Mac68K"].includes(t),iOS:["iPhone","iPad","iPod"].includes(t),Windows:["Win32","Win64","Windows","WinCE"].includes(t),Android:/Android/.test(e),Linux:/Linux/.test(t),Unknown:!0};return Object.keys(n).find(e=>n[e])||"Unknown"})(),o=()=>"MacOS"===r,a=()=>"iOS"===r},15721:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});let r=()=>!!window.navigator.clipboard&&!!window.navigator.clipboard.write},9732:function(){},140:function(){},17360:function(){},16922:function(){}},function(e){e.O(0,[719,8788,9868,7655,1272,6995,4990,5322,5851,6653,3642,114,2397,6731,6903,1998,7806,1178,7611,1367,6868,3149,509,6953,3825,5205,4706,738,6173,1046,567,9071,9999,8804,4168,9705,1957,1133,627,5223,2850,146,8810,2150,2888,9774,179],function(){return e(e.s=81561)}),_N_E=e.O()}]);