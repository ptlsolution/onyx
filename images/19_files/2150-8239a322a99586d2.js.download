(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2150],{28180:function(e,n,t){"use strict";t.d(n,{m:function(){return ea}});var s=t(52322),a=t(74133),c=t(94951),l=t(71592),r=t(7415),i=t(2784),u=t(13844),o=t(37132);t(39515),t(62159),t(19541);var _=t(46724),b="_1286nb12i9 _1286nb1289 _1286nb123f _1286nb12df _1286nb12xl _1286nb132l _1286nb13df _1286nb13kr _1286nb18l _1286nb12ur _1286nb12t9 _1286nb12tr _1286nb16y1",d="_jr4qwv5 _1286nb187s _1286nb17dg",m="_1286nb13ex _1286nb13df _1286nb17uj _1286nb189",f=(0,_.c)({defaultClassName:"_jr4qwvb _1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb199 _1286nb117l",variantClassNames:{orientation:{right:"_jr4qwv9",left:"_jr4qwva"}},defaultVariants:{},compoundVariants:[]}),h=t(15605),x=t(35074),p=t(69619),j=t(59086),N=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"m418.834 199.236-14.142-14.142c-23.679-23.679-64.603-27.321-91.924 0l-42.417 42.417-.01.009-.009.01-287.138 287.138a25 25 0 0 0-7.322 17.678v70.71c0 13.807 11.193 25 25 25h70.71c6.63 0 12.989-2.634 17.678-7.322l287.147-287.146.001-.001 42.426-42.426c27.696-27.697 23.679-68.246 0-91.925M61.227 578.056H25.872v-35.355l262.147-262.147 35.355 35.355zm322.251-322.251-24.749 24.749-35.355-35.355 24.749-24.749c5.321-5.321 14.784-6.429 21.213 0l14.142 14.142c5.367 5.366 6.009 15.204 0 21.213"})}),v=t(85074),y=t(9691);let g=()=>{let e=(0,y.PN)();return(0,i.useCallback)(n=>{let{interactionType:t,location:s,type:a}=n;e({event:"ga4event",event_name:"tooltip_interaction",interaction_type:t,location:s,type:a,resource_type:"template-editor"})},[e])};var R=t(283),w=t(53476);let k=async e=>{let n=await fetch("/api/user/files/duplicate?reference=".concat(e),{method:"POST"});return n.ok?{success:!0,data:await n.json()}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:500===n.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:"UNKNOWN_ERROR"}};var C=t(57502);let E=e=>{let n=(0,w.Zl)(C.K);return(0,i.useCallback)(async()=>{let t=await k(e);return!!t.success&&(n(e=>[t.data,...e]),!0)},[e,n])},T=(0,i.createContext)({}),O=()=>(0,i.useContext)(T);var S=t(40291),V=t(86903),M=t(8749);let A=async e=>{let n=await fetch("/api/user/files?reference=".concat(e),{method:"DELETE"});return n.ok?{success:!0}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:500===n.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:"UNKNOWN_ERROR"}};t(77507),(0,_.c)({defaultClassName:"_wdo18jn _1286nb14fl _1286nb14gl _1286nb14hl _1286nb14il _1286nb14kl _1286nb14lx _1286nb14n9 _1286nb14ol _1286nb138r _1286nb13g3",variantClassNames:{checked:{false:"_1286nb14yb",true:"_wdo18jm _1286nb176j _1286nb14sr _1286nb18l _1286nb12t9 _1286nb12tx"}},defaultVariants:{checked:!1},compoundVariants:[]});var H="_1286nb13df _1286nb13ca _1286nb18l _1286nb12tx";(0,_.c)({defaultClassName:"_wdo18j2 _1286nb1239 _1286nb1289 _1286nb12d9 _1286nb12i9 _1286nb14k3 _1286nb14lf _1286nb14mr _1286nb14o3 _1286nb11er _1286nb16ea _1286nb11 _1286nb18l _1286nb12t9 _1286nb16xs _1286nb17dg",variantClassNames:{active:{false:"_wdo18j3",true:"_1286nb17os _1286nb17oy"}},defaultVariants:{active:!1},compoundVariants:[]});let I=e=>{let{children:n,onClick:t}=e;return(0,s.jsx)("a",{className:"_1286nb15nj _1286nb17q",onClick:t,children:n})};var K=t(68938);let Z=()=>(0,i.useContext)(K.v),q=async e=>{let n=await fetch("/api/user/files/restore?reference=".concat(e),{method:"POST"});return n.ok?{success:!0}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:500===n.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:"UNKNOWN_ERROR"}},F=e=>{let{setToast:n}=(0,v.p)(),{setIsTrash:t}=Z(),{t:a}=(0,r.$G)("error"),c=(0,w.Zl)(C.K),[l,u]=(0,w.FV)(C.Q),o=(0,i.useCallback)(()=>{let n=l.find(n=>n.reference===e);n&&(c(e=>[n,...e]),u(n=>n.filter(n=>n.reference!==e)))},[e,c,u,l]),_=(0,i.useCallback)(e=>{e.preventDefault(),t(!1)},[t]);return{restoreFile:(0,i.useCallback)(async()=>(await q(e)).success?(n({type:"success",title:"",message:(0,s.jsx)(r.cC,{i18nKey:"projects:toast.restore",values:{type:"file"},components:{1:(0,s.jsx)(I,{onClick:_})}}),duration:4e3}),o(),!0):(n({type:"danger",message:a("unknown")}),!1),[e,n,_,o,a])}},U=e=>{let{restoreFile:n}=F(e),[t,s]=(0,w.FV)(C.K),a=(0,i.useRef)(t.filter(n=>n.reference===e)[0]),c=(0,i.useCallback)(async()=>!!await n()&&!!a&&(s(e=>[a.current,...e]),!0),[n,s]);return{deleteFile:(0,i.useCallback)(async()=>!!(await A(e)).success&&(s(n=>n.filter(n=>n.reference!==e)),!0),[e,s]),undoDeleteFile:c}};var L=t(42718);let J=e=>{let{children:n,onClick:t}=e;return(0,s.jsx)("span",{className:"_1286nb15nj _1286nb189 _1286nb17q _1286nb11a3",onClick:t,children:n})},G=e=>{let{location:n}=e,{t}=(0,r.$G)("projects"),[a,l]=(0,i.useState)(!1),{setToast:u}=(0,L.p)(),o=g(),{reference:_}=O(),{deleteFile:b,undoDeleteFile:d}=U(_),m=async()=>{await b()?u({type:"success",title:t("toast.deleteSuccessTitle"),message:(0,s.jsx)(r.cC,{i18nKey:"projects:toast.deleteSuccess",values:{type:"file"},components:{1:(0,s.jsx)(J,{onClick:d})}})}):u({type:"danger",title:t("toast.deleteError",{type:"file"}),message:""}),l(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"_1286nb12i9 _1286nb1289 _1286nb123f _1286nb12df _1286nb12xl _1286nb132l _1286nb13df _1286nb13kr _1286nb18l _1286nb12ur _1286nb12t9 _1286nb12tr _1286nb16y1",onClick:()=>{l(!0),o({interactionType:"delete",location:n,type:"file"})},children:[(0,s.jsx)(c.J,{as:M.Z})," ",t("actions.delete")]}),(0,s.jsxs)(V.u,{size:"sm",open:a,onOpenChange:()=>l(!1),children:[(0,s.jsx)("p",{className:"_1286nb12n9 _1286nb12r3 _1286nb12sl _1286nb11ox",children:t("deleteModal.title")}),(0,s.jsx)("div",{className:"_1286nb11p9 _1286nb12rx _1286nb12sl",children:t("deleteModal.subtitle")}),(0,s.jsxs)("div",{className:"_1286nb12xx _1286nb132x _1286nb18l _1286nb12v9 _1286nb12us _1286nb12tx",children:[(0,s.jsx)(S.f5,{className:H,color:"gray",onClick:()=>l(!1),children:t("deleteModal.cancel")}),(0,s.jsx)(S.gg,{className:H,onClick:()=>m(),children:t("deleteModal.accept")})]})]})]})},$=e=>{let{onClickRename:n,location:t}=e,{reference:a,externalId:l}=O(),{t:i}=(0,r.$G)("projects"),u=E(a),{setToast:o}=(0,v.p)(),_=g(),f=(0,h.L3)(),y=async()=>{_({interactionType:"duplicate",location:t,type:"file"}),await u()?o({type:"success",title:i("toast.duplicateSuccess"),message:"",duration:4e3}):o({type:"danger",title:i("toast.duplicateError"),message:"",duration:4e3})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:d,children:(0,s.jsxs)("button",{className:b,onClick:()=>{_({interactionType:"edit",location:t,type:"file"}),window.location.assign("".concat(f(R.M),"?template=").concat(l))},children:[(0,s.jsx)(c.J,{as:x.Z})," ",i("actions.edit")]})}),(0,s.jsx)("span",{"aria-hidden":"true",className:m}),(0,s.jsx)("li",{className:d,children:(0,s.jsxs)("button",{className:b,onClick:()=>{_({interactionType:"rename",location:t,type:"file"}),n()},children:[(0,s.jsx)(c.J,{as:N})," ",i("actions.rename")]})}),(0,s.jsx)("li",{className:d,children:(0,s.jsxs)("button",{className:b,onClick:()=>y(),children:[(0,s.jsx)(c.J,{as:j.Z})," ",i("actions.duplicate")]})}),(0,s.jsx)("li",{className:d,children:(0,s.jsxs)("button",{className:b,onClick:()=>{_({interactionType:"download",location:t,type:"file"}),window.location.assign("".concat(f(R.M),"?template=").concat(l,"&action=download"))},children:[(0,s.jsx)(c.J,{as:p.Z})," ",i("actions.download")]})}),(0,s.jsx)("span",{"aria-hidden":"true",className:m}),(0,s.jsx)("li",{className:d,children:(0,s.jsx)(G,{location:t})})]})};var z=t(84591);let P=()=>{let{reference:e}=O(),{restoreFile:n}=F(e),{t}=(0,r.$G)("projects"),a=(0,w.Zl)(C.Q),l=(0,i.useCallback)(async()=>{await n()&&a(n=>n.filter(n=>n.reference!==e))},[e,n,a]);return(0,s.jsx)("li",{className:d,children:(0,s.jsxs)("button",{className:b,onClick:l,children:[(0,s.jsx)(c.J,{as:z.Z})," ",t("actions.restore")]})})},W=e=>{let{onClickRename:n,type:t,popoverOrientation:a="right",isHome:l=!1}=e,[r,_]=(0,i.useState)(!1),b=(0,i.useRef)(),d=()=>{clearTimeout(b.current),b.current=setTimeout(()=>{_(!1)},300)},m=()=>{clearTimeout(b.current),_(!1)};return(0,s.jsxs)(u.fC,{open:r,children:[(0,s.jsx)(u.xz,{asChild:!0,children:(0,s.jsx)("button",{className:r?"_1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb18l _1286nb12tx _1286nb12t9 _1286nb1393 _1286nb13gf _1286nb17uj":"_1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb18l _1286nb12tx _1286nb12t9 _1286nb1393 _1286nb13gf _1286nb187s _1286nb17up",onMouseOver:()=>{clearTimeout(b.current),b.current=setTimeout(()=>{clearTimeout(b.current),_(!0)},300)},onClick:()=>{clearTimeout(b.current),_(!0)},onMouseLeave:d,title:"actions",children:(0,s.jsx)(c.J,{as:o.Z})})}),(0,s.jsx)(u.VY,{className:f({orientation:a}),onMouseLeave:d,onMouseOver:()=>clearTimeout(b.current),onOpenAutoFocus:e=>{e.preventDefault()},children:(0,s.jsx)("ul",{className:"_jr4qwv3 _1286nb1h _1286nb1k _1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb187s _1286nb13b9",children:"all"===t?(0,s.jsx)($,{onClickRename:()=>{n(),m()},location:l?"home":"my_profile"}):(0,s.jsx)(P,{})})})]})};var B=t(96577),D=t.n(B);let Q=e=>{let{src:n,alt:t,width:a,height:c}=e;return(0,s.jsx)("div",{className:"_1286nb1239 _1286nb1289 _1286nb12d9 _1286nb12i9 _1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb17os _1286nb13df _1286nb13kr _1286nb18l _1286nb12t9 _1286nb12tx",children:(0,s.jsx)(D(),{alt:t,src:n,className:"_1286nb16 _1286nb13df _1286nb13kr",width:a,height:c})})},Y=async e=>{let{name:n,reference:t}=e,s=await fetch("/api/user/files?reference=".concat(t),{method:"PUT",body:JSON.stringify({name:n})});return s.ok?{success:!0}:401===s.status||403===s.status||405===s.status?{success:!1,data:"AUTHENTICATION_ERROR"}:500===s.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:"UNKNOWN_ERROR"}},X=e=>{let n=(0,i.useRef)(null),[t,s]=(0,i.useState)(!1),[a,c]=(0,i.useState)(!1),{setToast:l}=(0,v.p)(),{t:u}=(0,r.$G)("error"),o=(0,w.Zl)(C.K);(0,i.useEffect)(()=>{t&&n.current&&n.current.select()},[t]);let _=(0,i.useCallback)(async()=>{if(a||!n.current)return;let t=n.current.value;0!==t.trim().length&&(c(!0),(await Y({name:t,reference:e})).success?o(n=>n.map(n=>n.reference===e?{...n,name:t}:n)):l({type:"danger",message:u("unknown")}),c(!1),s(!1))},[a,e,o,l,u]);return{inputRef:n,isRenaming:t,renameFile:_,activateRename:(0,i.useCallback)(()=>{s(!0)},[])}};t(12351);var ee=(0,_.c)({defaultClassName:"_1y5m5s1b _1y5m5s17 _1y5m5s16 _1286nb17q",variantClassNames:{isHome:{true:"_1y5m5s19 _1286nb13b9",false:"_1286nb13kr"}},defaultVariants:{},compoundVariants:[]}),en=(0,_.c)({defaultClassName:"_1y5m5s13 _1286nb12xf _1286nb132f _1286nb18l _1286nb12v3 _1286nb19f",variantClassNames:{isHome:{false:"_1286nb13kr _1286nb13df"}},defaultVariants:{},compoundVariants:[]}),et=(0,_.c)({defaultClassName:"_1y5m5s1h _1y5m5s1e",variantClassNames:{fill:{true:"_1286nb13df",false:"_1286nb13b9"}},defaultVariants:{},compoundVariants:[]});let es=e=>{let{children:n,type:t}=e,{externalId:a}=O(),c=(0,h.L3)();return"trash"===t?n:(0,s.jsx)("a",{href:"".concat(c(R.M),"?template=").concat(a),className:"_1y5m5s16 _1286nb17q",children:n})},ea=e=>{let{fileUnity:n,type:t,popoverOrientation:u="right",refToObserve:o,isHome:_=!1}=e,{inputRef:b,isRenaming:d,activateRename:m,renameFile:f}=X(n.reference),{t:h}=(0,r.$G)("common"),x=(0,i.useMemo)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"_1286nb1h _1286nb1k _1286nb12nl _1286nb12qx _1286nb115 _1286nb1y",children:n.name}),(0,s.jsx)("p",{className:"_1y5m5s1m _1286nb12nx",children:h("template")})]}),[n.name,h]),p=(0,i.useMemo)(()=>(0,s.jsx)("input",{ref:b,className:"_1y5m5s1q _1286nb12if _1286nb128f _1286nb14fr _1286nb14gr _1286nb14hr _1286nb14ir _1286nb14jx _1286nb14l9 _1286nb14ml _1286nb14nx _1286nb119x _1286nb13gr _1286nb14sr",type:"text",defaultValue:n.name,onBlur:()=>f(),onKeyDown:e=>{"Enter"===e.key&&f()},autoFocus:!0}),[n.name,b,f]);return(0,s.jsx)(T.Provider,{value:n,children:(0,s.jsxs)("div",{className:en({isHome:_}),ref:o,children:[(0,s.jsx)("div",{className:ee({isHome:_}),children:(0,s.jsx)(es,{type:t,children:n.thumbnail?(0,s.jsx)(Q,{alt:n.name,src:n.thumbnail.url,width:n.thumbnail.width,height:n.thumbnail.height}):(0,s.jsx)(a.x,{display:"flex",justifyContent:"center",alignItems:"center",height:"full",width:"full",backgroundColor:"grayHades",children:(0,s.jsx)(c.J,{as:l.Z,size:"xl",color:"grayOxford","aria-label":"no image"})})})}),(0,s.jsx)("div",{className:et({fill:!_}),children:d?p:x}),(0,s.jsx)("div",{className:"_1y5m5s1o _1286nb199 _1286nb1ar _1286nb1j3 _1286nb189 _1286nb187",children:(0,s.jsx)(W,{onClickRename:m,type:t,popoverOrientation:u,isHome:_})})]})})}},8173:function(e,n,t){"use strict";t.d(n,{M:function(){return c}});var s=t(9691),a=t(2784);let c=()=>{let e=(0,s.PN)();return(0,a.useCallback)(n=>{let{linkText:t,location:s}=n;e({event:"ga4event",event_name:"edit_generate",location:s,link_text:t})},[e])}},68938:function(e,n,t){"use strict";t.d(n,{v:function(){return s}});let s=(0,t(2784).createContext)({})},283:function(e,n,t){"use strict";t.d(n,{M:function(){return s}});let s="https://www.freepik.com/designer/edit"},46138:function(e,n,t){"use strict";t.d(n,{w:function(){return l}});var s=t(2784),a=t(53476),c=t(57502);let l=()=>{let e=(0,a.rb)(c.K),n=(0,a.rb)(c.Q);(0,s.useEffect)(()=>()=>{e(),n()},[e,n])}},63323:function(e,n,t){"use strict";t.d(n,{Y:function(){return _}});var s=t(91541),a=t(7415),c=t(2784),l=t(53476),r=t(42718),i=t(51717);let u=async e=>{let{page:n,perPage:t,folderId:s,locale:a}=e,c=await fetch("".concat("/api/user/files").concat((0,i.T)({page:n,per_page:t,"filter[folder_id]":s,locale:a})),{cache:"no-store"});return c.ok?{success:!0,data:await c.json()}:401===c.status||403===c.status||405===c.status?{success:!1,data:"AUTHENTICATION_ERROR"}:500===c.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:"UNKNOWN_ERROR"}};var o=t(57502);let _=()=>{let[e,n]=(0,c.useState)(!0),[t,i]=(0,c.useState)(!1),[_,b]=(0,c.useState)(null),[d,m]=(0,l.FV)(o.K),[f,h]=(0,c.useState)(0),[x,p]=(0,c.useState)(!0),{locale:j}=(0,s.V)(),{setToast:N}=(0,r.p)(),{t:v}=(0,a.$G)("error"),y=(0,c.useCallback)(()=>{N({type:"danger",message:v("unknown")})},[N,v]),g=(0,c.useCallback)(async()=>{if(!x||t||_)return;i(!0),n(!1);let e=await u({page:f+1,locale:j});e.success?(p(e.data.pagination.last_page>f+1),h(e=>e+1),m(n=>[...e.data.files,...n])):(b(e.data),y()),i(!1)},[x,t,_,f,j,m,y]);return{error:_,files:d,loading:t,hasNextPage:x,getNewFiles:g,page:f,isFirstLoading:e}}},57502:function(e,n,t){"use strict";t.d(n,{K:function(){return a},Q:function(){return c}});var s=t(53476);let a=(0,s.cn)({key:"files",default:[]}),c=(0,s.cn)({key:"trashFiles",default:[]})},51717:function(e,n,t){"use strict";t.d(n,{T:function(){return s}});let s=e=>{let n=Object.keys(e),t="?";return 0===n.length?"":(n.forEach((n,s)=>{let a=e[n];!a||n.includes(" ")||(t="".concat(t).concat(0===s?"":"&").concat(n,"=").concat(a.toString()))}),t)}},84591:function(e,n,t){"use strict";var s=t(52322);n.Z=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,s.jsx)("path",{d:"M413 379c-13.807 0-25 11.193-25 25 0 99.804-81.196 181-181 181S26 503.804 26 404s81.196-181 181-181c50.012 0 97.122 20.734 130.866 56H278c-13.808 0-25 11.192-25 25s11.192 25 25 25h120c13.808 0 25-11.192 25-25V184c0-13.808-11.192-25-25-25s-25 11.192-25 25v59.382C330.017 199.026 270.326 173 207 173c-61.702 0-119.712 24.028-163.342 67.658S-24 342.298-24 404 .028 523.712 43.658 567.342 145.298 635 207 635s119.712-24.028 163.342-67.658S438 465.702 438 404c0-13.807-11.193-25-25-25"})})},8749:function(e,n,t){"use strict";var s=t(52322);n.Z=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,s.jsx)("path",{d:"M428 231.5H317v-65c0-13.807-11.193-25-25-25H122c-13.807 0-25 11.193-25 25v65H-14c-13.807 0-25 11.193-25 25s11.193 25 25 25h25v306c0 35.841 29.159 65 65 65h262c35.841 0 65-29.159 65-65v-306h25c13.807 0 25-11.193 25-25s-11.193-25-25-25m-281-40h120v40H147zm206 396c0 8.271-6.729 15-15 15H76c-8.271 0-15-6.729-15-15v-306h292z"}),(0,s.jsx)("path",{d:"M150 341.5c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25m114 0c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25"})]})},77507:function(){},19541:function(){},12351:function(){}}]);